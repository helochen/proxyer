package com.mhxh.proxyer.tcp.game.constants;

import com.mhxh.proxyer.decode.EncryptDictionary;
import io.netty.buffer.ByteBufUtil;

import java.nio.charset.Charset;
import java.util.Map;
import java.util.regex.Pattern;

public class DataSplitConstant {

    public static final Pattern DATA_PATTERN = Pattern.compile("\\{.*?}");

    public static final Pattern MAP_NPC_PATTERN = Pattern.compile("\\{x.*?地图.*?}");

    // 去除领取人
    public static final Pattern MAP_NPC_TARGET_ROLE_PATTERN = Pattern.compile("领取人id=\\{.*?},");


    public static final Pattern TASK_DECOMPOSITION_POSTION = Pattern.compile("(?<=#Y/).*?(?=#W)");

    public static final Pattern TASK_DECOMPOSITION_NAME = Pattern.compile("(?<=#G/).*?(?=#R)");

    public static final Pattern TASK_DECOMPOSITION_X_Y = Pattern.compile("(.*?)");

    // 青龙堂任务
    public static final Pattern TASK_QING_LONG_NEED_ITEM = Pattern.compile("(?<=#Y).*?(?=#W)");

    public static void main(String[] args) {

// "000180cb91da00fc7a632c48612c37652c4b432c655a2c77372c7a552c575a2c655a2c4e5a2c32492c55662c366f2c4c782c4a392c55662c366f2c4c782c4a392c55662c366f2c75662c575a2c70642c46432c78692c4a392c55662c366f2c4c782c4a392c55662c366f2c4c782c4a392c55662c46432c364f2c4b432c575a2c7a632c4e382c7a632c48642c38712c51732c637a2c59482c48612c704b2c575a2c396e2c46432c77372c4d732c48642c796c2c54392c75662c32682c75662c364f2c575a2c32682c4c392c364f2c575a2c77302c376c2c48612c37652c55662c796c2c77372c75662c704b2c59482c54392c4c392c4e5a2c7a632c54392c4c392c73792c";
// "000180cb91da00fc7a632c48612c37652c4b432c655a2c77372c7a552c575a2c655a2c4e5a2c32492c55662c366f2c4c782c4a392c55662c366f2c4c782c4a392c55662c366f2c75662c575a2c70642c46432c78692c4a392c55662c366f2c4c782c4a392c55662c366f2c4c782c4a392c55662c46432c364f2c4b432c575a2c7a632c4e382c7a632c48642c38712c51732c637a2c59482c48612c704b2c575a2c396e2c46432c77372c4d732c48642c796c2c54392c75662c32682c75662c364f2c575a2c32682c4c392c364f2c575a2c77302c376c2c48612c37652c55662c796c2c77372c75662c704b2c59482c54392c4c392c4e5a2c7a632c54392c32682c50702c";


        String[] tmp = new String[]{
                 "5b22cafdd7d668592c6d502c225d3d49762c71362c5a752c5a752c49762c7d"
                , "e70080cb91da00e356502c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b22d5cbbac5225d3d2230572c43782c45542c664e2c6e422c78692c41612c68592c6d392c53772c222c5b22c3dcc2eb225d3d2230572c43782c45542c664e2c6e422c78692c41612c68592c6d392c53772c222c5b22cafdd7d668592c6d502c225d3d49762c71362c5a752c5a752c49762c7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c77642c57612c5a752c79502c56502c38762c"

                ,"20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c77642c57612c5a752c79502c56502c38762c"
                ,"9b0080cb91da009756502c71362c71362c56502c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b2278692c225d3d425a2c425a2c2c5b2253392c225d3d5a752c57612c7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c77642c57612c79502c79502c57612c38762c"
                ,"a70080cb91da00a356502c71362c71362c5a752c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b2278692c225d3d56502c71362c425a2c425a2c2c5b2253392c225d3d56502c57612c5a752c5a752c7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c77642c57612c425a2c79502c425a2c71362c"
                ,"3a0080cb91da003679502c2a2d2a49762c71362c5a752c5a752c49762c2a2d2a56502c77642c425a2c35522c77642c57612c5a752c79502c56502c38762c"
                , "9e0080cb91da009a56502c71362c71362c56502c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b2278692c225d3d38762c49762c2c5b2253392c225d3d56502c5a752c57612c7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c425a2c49762c425a2c425a2c79502c79502c"
                , "a70080cb91da00a356502c71362c71362c5a752c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b2278692c225d3d56502c77642c77642c79502c2c5b2253392c225d3d5a752c425a2c425a2c5a752c7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c425a2c49762c425a2c425a2c77642c79502c"
                , "840080cb91da008056502c49762c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b22d0f2c1d0225d3d56502c7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c425a2c49762c425a2c77642c5a752c425a2c"
                , "780080cb91da007456502c77642c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c425a2c49762c425a2c35522c5a752c77642c"
                , "8a0080cb91da008649762c35522c71362c77642c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b22d0f2c1d0225d3d425a2c7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c425a2c49762c35522c77642c71362c35522c"
                , "7e0080cb91da007a49762c77642c57612c57612c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c425a2c49762c35522c77642c71362c35522c"
                , "0b0180cb91da010756502c425a2c71362c56502c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b22b5d8cdbc225d3d56502c71362c35522c71362c2c5b22b1e0bac5225d3d56502c71362c71362c35522c2c5b22b1eacab6225d3d225f56502c71362c57612c5f56502c77642c425a2c35522c425a2c49762c425a2c79502c71362c71362c5f77642c57612c38762c5f425a2c5a752c35522c49762c222c5b22d0f2c1d0225d3d56502c71362c71362c35522c7d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c425a2c49762c38762c79502c56502c71362c"
       };
        // 五庄观 传送 门派传送人
        //b20080cb91da00ae56502c425a2c71362c5a752c2a2d2a6d502c6d392c2050382c6d392c77752c4c712c50382c20664e2c45542c6e422c3d7b5b56502c5d3d22cee5d7afb9db222c5b5a752c5d3d56502c425a2c71362c57612c2c5b49762c5d3d22c3c5c5c9b4abcbcdc8cb227d20664e2c45542c6e422c41612c664e2c48752c20664e2c45542c6e422c2045542c48752c6d502c2a2d2a56502c77642c425a2c35522c77642c49762c35522c35522c57612c38762c
        // � �藨� 甐P,502*-*do local ret={[1]="五庄观",[2]=1509,[3]="门派传送人"} return ret end*-*1657637798

        EncryptDictionary encryptDictionary = new EncryptDictionary();

        Map<String, String> decodeMap = encryptDictionary.encodeMap;

        for (String t : tmp) {
            for (String key : decodeMap.keySet()) {
                t = t.replaceAll(key, decodeMap.get(key));
            }
            System.out.println("===================================");
            byte[] bytes6 = ByteBufUtil.decodeHexDump(t);
            String result6 = new String(bytes6, Charset.forName("GBK"));
            System.out.println(result6);

        }

        String x = tmp[1];
        System.out.println("+++++++++++++++++++++++++++++++++");
        byte[] bytes6= ByteBufUtil.decodeHexDump(x);
        String result6 = new String(bytes6 , Charset.forName("GBK"));
        String ID_HEAD = "[\"数字hY,mP,\"]=";
        final int i = result6.indexOf(ID_HEAD);
        if (i >= 0) {
            final String subGbk = result6.substring(i + ID_HEAD.length());
            final int codeEnd = subGbk.indexOf("}");
            if (codeEnd > 0) {
                final String code = subGbk.substring(0, codeEnd);
                System.out.println(code);
            }
        }
        System.out.println(result6);


    }
}
